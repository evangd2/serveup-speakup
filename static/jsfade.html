<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>

    <!-- https://codereview.stackexchange.com/questions/135550/js-cross-fade-transition -->

    <style type="text/css">
      /* Just some minimal styling for demo purposes */
      .imgbox {
        position: relative;
        width: 640px;
        height: 480px;
        border: 1px solid black;
      }

      .imgbox img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      /* Make sure the second image isn't visible at first */
      #img2 {
        opacity: 1.0;
        transition: opacity .5s;
      }

    </style>
  </head>
  <body>
    <div class="imgbox">
      <!-- <img id="img1" onload="fadeImage();">
      <img id="img2" onload="fadeImage();"> -->

      <!-- <img id="img1">
      <img id="img2"> -->

      <img id="img1" src="https://i.imgur.com/woXDBE1.png">
      <img id="img2" src="https://i.imgur.com/XntCAQK.png">

    </div>


    <script type="text/javascript">
      var imgidx = 0;
      var imgtoggle = false;

      // Images for our slideshow - have to be at least two
      var images = [
        'https://i.imgur.com/woXDBE1.png',
        'https://i.imgur.com/XntCAQK.png',
      ];

      // MY STUFF
      img = document.querySelector("#img2");
      console.log(img);
      img.addEventListener("mouseover", function() {
        // alert("HELLO");
        document.querySelector('#img2').style.opacity = '0.0';
        // document.querySelector("#img2").src = images[1];

        // window.setTimeout(swapImage, 500);
      })

      // On mouse out, transition back to the original images
      img = document.querySelector("#img2");
      console.log(img);
      img.addEventListener("mouseout", function() {
        // alert("HELLO");
        document.querySelector('#img2').style.opacity = '1.0';

      })

      window.swapImage = function() {
        document.querySelector("#img2").src = images[1];
      }

      // THEIR STUFF
      // STEP 3
      // This function will initialize loading the next image in background
      window.nextImage = function() {
        imgtoggle = !imgtoggle;

        imgidx = (imgidx + 1) % images.length;

        if (imgtoggle)
          document.getElementById('img2').src = images[imgidx];
        else
          document.getElementById('img1').src = images[imgidx];;
      }

      // This function will trigger the crossfade and then start the timer for the next switch
      // STEP 2
      window.fadeImage = function() {
        if (imgtoggle)
          document.getElementById('img2').style.opacity = '1.0';
        else
          document.getElementById('img2').style.opacity = '0.0';
        window.setTimeout(nextImage, 1000);
      }

      // Now load our very first image to start the slideshow
      // STEP 1
      // document.getElementById('img1').src = images[0];
      // document.getElementById('img2').src = images[1];

    </script>

  </body>
</html>
